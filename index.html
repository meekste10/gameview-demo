<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>GameView ‚Äî Ethical Telemetry Prototype</title>
<style>
  :root {
    --charcoal:#101820; --gold:#ffd97a; --sky:#72b6e5;
    --field1:#0b6623; --field2:#0a4f1a;
  }
  body{margin:0;background:var(--charcoal);color:#fff;
       font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;}
  header{padding:14px 16px;border-bottom:2px solid #223;
         display:flex;justify-content:space-between;flex-wrap:wrap;align-items:center;}
  header h1{font-size:18px;margin:0;}
  .badge{background:var(--sky);color:#000;font-weight:700;
         padding:6px 10px;border-radius:10px;transition:opacity .5s;}
  main{padding:12px;}
  #fieldWrap{max-width:1000px;margin:0 auto;}
  canvas{width:100%;height:auto;background:linear-gradient(var(--field1),var(--field2));
         border:4px solid var(--gold);border-radius:10px;display:block;}
  #controls{max-width:1000px;margin:10px auto 0;display:flex;gap:8px;flex-wrap:wrap;}
  button{flex:1 1 180px;padding:14px 16px;font-size:16px;font-weight:700;
         border:0;border-radius:10px;}
  #nextPlay{background:var(--gold);color:#000;}
  .toggle{background:#1f2937;color:#fff;border:1px solid #334155;}
  #dataLog{max-width:1000px;margin:10px auto;padding:10px 12px;
           border:1px solid #233;border-radius:8px;background:#0e1420;
           font-size:14px;line-height:1.35;max-height:180px;overflow:auto;}
  .ok{color:#94f7c5}.info{color:#c6e2ff}.warn{color:#ffdf99}
  footer{max-width:1000px;margin:0 auto 18px;padding:8px 12px;opacity:.8;font-size:12px;color:#bcd;}
  #contextNote{position:fixed;bottom:6px;right:10px;font-size:11px;
               background:rgba(16,24,32,.65);padding:6px 8px;border-radius:6px;
               color:#9cc;z-index:99;}
</style>
</head>
<body>
<header>
  <h1>üèà GameView ‚Äî Data Becomes Drama</h1>
  <div class="badge" id="trustBadge">Visible Truth ‚Ä¢ 1.5 s Delay ‚úì</div>
</header>

<main>
  <div id="fieldWrap"><canvas id="field" width="1000" height="520"></canvas></div>

  <div id="controls">
    <button id="nextPlay">üì° Engage Synthetic Play</button>
    <button id="toggleCoach" class="toggle">Coach Mode OFF</button>
    <button id="toggleMotion" class="toggle">Reduce Motion OFF</button>
  </div>

  <div id="dataLog" aria-live="polite"></div>
</main>

<footer>¬© 2025 GameView LLC ‚Ä¢ Ethics-as-UX Demo ‚Ä¢ Practice Data Only</footer>
<div id="contextNote">Synthetic replay ¬∑ no live athlete data</div>

<script>
/* ---------- Synthetic Data ---------- */
const FEED = {
  metadata:{latency_s:1.5,consent:true,trust_badge_color:"#72B6E5",mode:"synthetic"},
  trajectory:[
    {x:0.0,y:0.0},{x:1.5,y:0.5},{x:3.0,y:1.1},{x:4.6,y:1.9},
    {x:6.4,y:2.8},{x:8.1,y:3.9},{x:9.7,y:5.1},{x:11.1,y:6.4}
  ],
  sponsor:{active:true,trail_color:"#FFD97A"}
};

/* ---------- Canvas Setup ---------- */
const dpr=Math.max(1,window.devicePixelRatio||1),
      canvas=document.getElementById('field'),
      ctx=canvas.getContext('2d');
function scaleCanvas(){
  const w=canvas.clientWidth,h=canvas.clientHeight;
  canvas.width=w*dpr;canvas.height=h*dpr;ctx.setTransform(dpr,0,0,dpr,0,0);
}
new ResizeObserver(scaleCanvas).observe(canvas);

/* ---------- Elements ---------- */
const trust=document.getElementById('trustBadge'),
      logEl=document.getElementById('dataLog'),
      nextBtn=document.getElementById('nextPlay'),
      coachBtn=document.getElementById('toggleCoach'),
      motionBtn=document.getElementById('toggleMotion');

let reduceMotion=false,coachMode=false,playCount=0,animRAF=null;

/* ---------- Toggles ---------- */
motionBtn.onclick=()=>{reduceMotion=!reduceMotion;
  motionBtn.textContent=`Reduce Motion ${reduceMotion?'ON':'OFF'}`;
  log(`Accessibility ‚Üí Reduce Motion ${reduceMotion?'enabled':'disabled'}`,'info');};
coachBtn.onclick=()=>{coachMode=!coachMode;
  coachBtn.textContent=`Coach Mode ${coachMode?'ON':'OFF'}`;
  log(`Perspective ‚Üí ${coachMode?'Coach diagnostic view':'Fan immersive view'}`,'info');
  drawField();};

/* ---------- Drawing ---------- */
function drawField(){
  const w=canvas.width/dpr,h=canvas.height/dpr;
  ctx.clearRect(0,0,w,h);
  const fieldGrad=ctx.createLinearGradient(0,0,0,h);
  fieldGrad.addColorStop(0,"#0b6623");fieldGrad.addColorStop(1,"#0a4f1a");
  ctx.fillStyle=fieldGrad;ctx.fillRect(0,0,w,h);
  ctx.strokeStyle='rgba(255,255,255,.4)';
  for(let i=0;i<=10;i++){ctx.beginPath();ctx.moveTo(80+i*80,40);ctx.lineTo(80+i*80,h-40);ctx.stroke();}
  // players
  for(let i=0;i<11;i++)dot(120+i*32, coachMode?200:140, coachMode?'#00aaff':'#00ff70');
  for(let i=0;i<11;i++)dot(120+i*32, coachMode?320:380, coachMode?'#ff8800':'#ff4d4d');
  if(coachMode){ctx.strokeStyle='#72b6e5';ctx.beginPath();ctx.moveTo(100,260);ctx.lineTo(880,260);ctx.stroke();}
}
function dot(x,y,c,r=7){ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2);ctx.fillStyle=c;ctx.fill();}
function predictiveCone(){
  const w=canvas.width/dpr,h=canvas.height/dpr;
  ctx.beginPath();ctx.moveTo(w*0.80,h*0.50);ctx.lineTo(w*0.90,h*0.40);
  ctx.lineTo(w*0.90,h*0.60);ctx.closePath();
  ctx.fillStyle='rgba(114,182,229,0.22)';ctx.fill();
}

/* ---------- Ethics Pulse ---------- */
function pulseBadge(){
  trust.animate([{opacity:1},{opacity:.5},{opacity:1}],
                {duration:1200,iterations:1});
}

/* ---------- Logging ---------- */
function log(msg,cls=''){const d=document.createElement('div');
  d.className=cls;d.textContent=msg;logEl.prepend(d);}

/* ---------- Play Engine ---------- */
function runPlay(){
  playCount++;cancelAnimationFrame(animRAF);
  pulseBadge();
  drawField();predictiveCone();
  const m=FEED.metadata;
  trust.style.background=m.trust_badge_color;
  trust.textContent=`Visible Truth ‚Ä¢ ${m.latency_s}s Delay ${m.consent?'‚úì':'‚úó'}`;
  log(`Play #${playCount} ‚Üí Synthetic feed engaged`,'ok');
  log(`Latency Envelope: ${m.latency_s}s | Consent: ${m.consent?'‚úì':'‚úó'}`,'info');

  const pts=FEED.trajectory.map(p=>({x:100+p.x*35,y:(canvas.height/dpr)-(p.y*35)-40}));
  let i=0;
  ctx.beginPath();ctx.strokeStyle='#ffd97a';ctx.lineWidth=3;ctx.moveTo(pts[0].x,pts[0].y);
  const step=()=>{
    if(i<pts.length){
      ctx.lineTo(pts[i].x,pts[i].y);ctx.stroke();
      // sponsor dots
      if(FEED.sponsor.active && i%2===0){
        ctx.beginPath();ctx.arc(pts[i].x,pts[i].y,2,0,Math.PI*2);
        ctx.fillStyle=FEED.sponsor.trail_color;ctx.fill();}
      i+=reduceMotion?pts.length:1;
      animRAF=requestAnimationFrame(step);
    }else{
      ctx.beginPath();ctx.arc(pts.at(-1).x,pts.at(-1).y,14,0,Math.PI*2);
      ctx.strokeStyle='rgba(255,217,122,0.4)';ctx.stroke();
      setTimeout(()=>{ctx.globalAlpha=0.3;drawField();ctx.globalAlpha=1;
        log('Awaiting next synthetic feed ‚Ä¶','info');},800);
    }
  };
  step();
}

/* ---------- Bootstrap ---------- */
nextBtn.onclick=runPlay;
drawField();predictiveCone();
log('Ready ¬∑ tap ‚Äúüì° Engage Synthetic Play‚Äù to begin.','info');
</script>
</body>
</html>
